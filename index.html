<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Management</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css">
  <style>
    body {
      background-color: #f8f9fa;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }
    .container {
      max-width: 500px;
      background-color: #ffffff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      text-align: center;
    }
    .btn {
      background-color: #007bff;
      color: #fff;
      border-radius: 20px;
      border: none;
      font-size: 16px;
      padding: 10px 20px;
      width: 100%;
      margin: 10px 0;
    }
    .btn:hover {
      background-color: #0056b3;
    }
    .modal-body input {
      margin-bottom: 15px;
    }
  </style>
</head>
<body>

<div class="container">
  <h1 class="mb-4">User Management Page</h1>

  <!-- Buttons to trigger modals -->
  <button class="btn" onclick="fetchUsers()">Load Users</button>
  <button class="btn" data-bs-toggle="modal" data-bs-target="#addUserModal">Add User</button>
  <button class="btn" data-bs-toggle="modal" data-bs-target="#updateUserModal">Update User</button>
  <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteUserModal">Delete User</button>

  <ul id="userList" class="list-group mt-3 mb-3 text-start"></ul>

  <!-- Add User Modal -->
  <div class="modal fade" id="addUserModal" tabindex="-1" aria-labelledby="addUserModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addUserModalLabel">Add New User</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <input type="text" id="addName" class="form-control" placeholder="Name">
          <input type="email" id="addEmail" class="form-control" placeholder="Email">
          <input type="number" id="addBirthdate" class="form-control" placeholder="Birthdate (timestamp)">
          <input type="text" id="addPhone" class="form-control" placeholder="Phone Number">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" onclick="addUser()">Add User</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Update User Modal -->
  <div class="modal fade" id="updateUserModal" tabindex="-1" aria-labelledby="updateUserModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="updateUserModalLabel">Update User</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <input type="text" id="updateId" class="form-control" placeholder="User ID to Update">
          <input type="text" id="newName" class="form-control" placeholder="New Name">
          <input type="email" id="newEmail" class="form-control" placeholder="New Email">
          <input type="number" id="newBirthdate" class="form-control" placeholder="New Birthdate (timestamp)">
          <input type="text" id="newPhone" class="form-control" placeholder="New Phone Number">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-warning" onclick="updateUser()">Update User</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Delete User Modal -->
  <div class="modal fade" id="deleteUserModal" tabindex="-1" aria-labelledby="deleteUserModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteUserModalLabel">Delete User</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <input type="text" id="deleteId" class="form-control" placeholder="User ID to Delete">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-danger" onclick="deleteUser()">Delete User</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const baseURL = 'https://67281907270bd0b975545491.mockapi.io/user';

  function fetchUsers() {
    fetch(baseURL)
      .then(response => response.json())
      .then(users => {
        const userList = document.getElementById('userList');
        userList.innerHTML = '';
        users.forEach(user => {
          const li = document.createElement('li');
          li.className = 'list-group-item';
          li.textContent = `${user.name} - ${user.email} - Birthdate: ${user.birthdate} - Phone: ${user.phone}`;
          userList.appendChild(li);
        });
      })
      .catch(error => console.error('Error fetching users:', error));
  }

  function addUser() {
    const data = {
      name: document.getElementById('addName').value,
      email: document.getElementById('addEmail').value,
      birthdate: parseInt(document.getElementById('addBirthdate').value),
      phone: document.getElementById('addPhone').value
    };

    fetch(baseURL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(() => {
      fetchUsers();
      document.getElementById('addUserModal').querySelector('.btn-close').click();
    })
    .catch(error => console.error('Error adding user:', error));
  }

  function updateUser() {
    const userId = document.getElementById('updateId').value;
    const data = {
      name: document.getElementById('newName').value || undefined,
      email: document.getElementById('newEmail').value || undefined,
      birthdate: parseInt(document.getElementById('newBirthdate').value) || undefined,
      phone: document.getElementById('newPhone').value || undefined
    };

    fetch(`${baseURL}/${userId}`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    })
    .then(() => {
      fetchUsers();
      document.getElementById('updateUserModal').querySelector('.btn-close').click();
    })
    .catch(error => console.error('Error updating user:', error));
  }

  function deleteUser() {
    const userId = document.getElementById('deleteId').value;

    fetch(`${baseURL}/${userId}`, { method: 'DELETE' })
      .then(() => {
        fetchUsers();
        document.getElementById('deleteUserModal').querySelector('.btn-close').click();
      })
      .catch(error => console.error('Error deleting user:', error));
  }
</script>
</body>
</html>
